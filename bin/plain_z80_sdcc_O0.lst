                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module plain
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _process_block
                             13 	.globl _puts
                             14 	.globl _printf
                             15 	.globl _state
                             16 ;--------------------------------------------------------
                             17 ; special function registers
                             18 ;--------------------------------------------------------
                             19 ;--------------------------------------------------------
                             20 ; ram data
                             21 ;--------------------------------------------------------
                             22 	.area _DATA
   0000                      23 _state::
   0000                      24 	.ds 16
                             25 ;--------------------------------------------------------
                             26 ; ram data
                             27 ;--------------------------------------------------------
                             28 	.area _INITIALIZED
                             29 ;--------------------------------------------------------
                             30 ; absolute external ram data
                             31 ;--------------------------------------------------------
                             32 	.area _DABS (ABS)
                             33 ;--------------------------------------------------------
                             34 ; global & static initialisations
                             35 ;--------------------------------------------------------
                             36 	.area _HOME
                             37 	.area _GSINIT
                             38 	.area _GSFINAL
                             39 	.area _GSINIT
                             40 ;--------------------------------------------------------
                             41 ; Home
                             42 ;--------------------------------------------------------
                             43 	.area _HOME
                             44 	.area _HOME
                             45 ;--------------------------------------------------------
                             46 ; code
                             47 ;--------------------------------------------------------
                             48 	.area _CODE
                             49 ;plain.c:8: void process_block(uint8_t* input) {
                             50 ;	---------------------------------
                             51 ; Function process_block
                             52 ; ---------------------------------
   0000                      53 _process_block::
   0000 DD E5         [15]   54 	push	ix
   0002 DD 21 00 00   [14]   55 	ld	ix,#0
   0006 DD 39         [15]   56 	add	ix,sp
                             57 ;plain.c:9: printf("[LOG] Processing block: ");
   0008 21r51r00      [10]   58 	ld	hl, #___str_0
   000B E5            [11]   59 	push	hl
   000C CDr00r00      [17]   60 	call	_printf
   000F F1            [10]   61 	pop	af
                             62 ;plain.c:10: for(int i=0; i<16; i++) {
   0010 01 00 00      [10]   63 	ld	bc, #0x0000
   0013                      64 00103$:
   0013 79            [ 4]   65 	ld	a, c
   0014 D6 10         [ 7]   66 	sub	a, #0x10
   0016 78            [ 4]   67 	ld	a, b
   0017 17            [ 4]   68 	rla
   0018 3F            [ 4]   69 	ccf
   0019 1F            [ 4]   70 	rra
   001A DE 80         [ 7]   71 	sbc	a, #0x80
   001C D2r46r00      [10]   72 	jp	NC, 00101$
                             73 ;plain.c:12: state[i] = input[i] ^ 0xFF; 
   001F 21r00r00      [10]   74 	ld	hl, #_state
   0022 09            [11]   75 	add	hl, bc
   0023 EB            [ 4]   76 	ex	de, hl
   0024 DD 6E 04      [19]   77 	ld	l, 4 (ix)
   0027 DD 66 05      [19]   78 	ld	h, 5 (ix)
   002A 09            [11]   79 	add	hl, bc
   002B 6E            [ 7]   80 	ld	l, (hl)
   002C 26 00         [ 7]   81 	ld	h, #0x00
   002E 7D            [ 4]   82 	ld	a, l
   002F 2F            [ 4]   83 	cpl
   0030 6F            [ 4]   84 	ld	l, a
   0031 7D            [ 4]   85 	ld	a, l
   0032 12            [ 7]   86 	ld	(de), a
                             87 ;plain.c:13: printf("%02x ", state[i]);
   0033 5F            [ 4]   88 	ld	e, a
   0034 16 00         [ 7]   89 	ld	d, #0x00
   0036 C5            [11]   90 	push	bc
   0037 D5            [11]   91 	push	de
   0038 21r6Ar00      [10]   92 	ld	hl, #___str_1
   003B E5            [11]   93 	push	hl
   003C CDr00r00      [17]   94 	call	_printf
   003F F1            [10]   95 	pop	af
   0040 F1            [10]   96 	pop	af
   0041 C1            [10]   97 	pop	bc
                             98 ;plain.c:10: for(int i=0; i<16; i++) {
   0042 03            [ 6]   99 	inc	bc
   0043 C3r13r00      [10]  100 	jp	00103$
   0046                     101 00101$:
                            102 ;plain.c:15: printf("\n");
   0046 21r70r00      [10]  103 	ld	hl, #___str_3
   0049 E5            [11]  104 	push	hl
   004A CDr00r00      [17]  105 	call	_puts
   004D F1            [10]  106 	pop	af
   004E                     107 00105$:
                            108 ;plain.c:16: }
   004E DD E1         [14]  109 	pop	ix
   0050 C9            [10]  110 	ret
   0051                     111 ___str_0:
   0051 5B 4C 4F 47 5D 20   112 	.ascii "[LOG] Processing block: "
        50 72 6F 63 65 73
        73 69 6E 67 20 62
        6C 6F 63 6B 3A 20
   0069 00                  113 	.db 0x00
   006A                     114 ___str_1:
   006A 25 30 32 78 20      115 	.ascii "%02x "
   006F 00                  116 	.db 0x00
   0070                     117 ___str_3:
   0070 00                  118 	.db 0x00
                            119 ;plain.c:18: int main() {
                            120 ;	---------------------------------
                            121 ; Function main
                            122 ; ---------------------------------
   0071                     123 _main::
   0071 DD E5         [15]  124 	push	ix
   0073 DD 21 00 00   [14]  125 	ld	ix,#0
   0077 DD 39         [15]  126 	add	ix,sp
   0079 21 F0 FF      [10]  127 	ld	hl, #-16
   007C 39            [11]  128 	add	hl, sp
   007D F9            [ 6]  129 	ld	sp, hl
                            130 ;plain.c:20: uint8_t data[16] = {
   007E 21 00 00      [10]  131 	ld	hl, #0
   0081 39            [11]  132 	add	hl, sp
   0082 EB            [ 4]  133 	ex	de, hl
   0083 3E 32         [ 7]  134 	ld	a, #0x32
   0085 12            [ 7]  135 	ld	(de), a
   0086 6B            [ 4]  136 	ld	l, e
   0087 62            [ 4]  137 	ld	h, d
   0088 23            [ 6]  138 	inc	hl
   0089 36 43         [10]  139 	ld	(hl), #0x43
   008B 6B            [ 4]  140 	ld	l, e
   008C 62            [ 4]  141 	ld	h, d
   008D 23            [ 6]  142 	inc	hl
   008E 23            [ 6]  143 	inc	hl
   008F 36 F6         [10]  144 	ld	(hl), #0xf6
   0091 6B            [ 4]  145 	ld	l, e
   0092 62            [ 4]  146 	ld	h, d
   0093 23            [ 6]  147 	inc	hl
   0094 23            [ 6]  148 	inc	hl
   0095 23            [ 6]  149 	inc	hl
   0096 36 A8         [10]  150 	ld	(hl), #0xa8
   0098 21 04 00      [10]  151 	ld	hl, #0x0004
   009B 19            [11]  152 	add	hl, de
   009C 36 88         [10]  153 	ld	(hl), #0x88
   009E 21 05 00      [10]  154 	ld	hl, #0x0005
   00A1 19            [11]  155 	add	hl, de
   00A2 36 5A         [10]  156 	ld	(hl), #0x5a
   00A4 21 06 00      [10]  157 	ld	hl, #0x0006
   00A7 19            [11]  158 	add	hl, de
   00A8 36 30         [10]  159 	ld	(hl), #0x30
   00AA 21 07 00      [10]  160 	ld	hl, #0x0007
   00AD 19            [11]  161 	add	hl, de
   00AE 36 8D         [10]  162 	ld	(hl), #0x8d
   00B0 21 08 00      [10]  163 	ld	hl, #0x0008
   00B3 19            [11]  164 	add	hl, de
   00B4 36 31         [10]  165 	ld	(hl), #0x31
   00B6 21 09 00      [10]  166 	ld	hl, #0x0009
   00B9 19            [11]  167 	add	hl, de
   00BA 36 31         [10]  168 	ld	(hl), #0x31
   00BC 21 0A 00      [10]  169 	ld	hl, #0x000a
   00BF 19            [11]  170 	add	hl, de
   00C0 36 98         [10]  171 	ld	(hl), #0x98
   00C2 21 0B 00      [10]  172 	ld	hl, #0x000b
   00C5 19            [11]  173 	add	hl, de
   00C6 36 A2         [10]  174 	ld	(hl), #0xa2
   00C8 21 0C 00      [10]  175 	ld	hl, #0x000c
   00CB 19            [11]  176 	add	hl, de
   00CC 36 E0         [10]  177 	ld	(hl), #0xe0
   00CE 21 0D 00      [10]  178 	ld	hl, #0x000d
   00D1 19            [11]  179 	add	hl, de
   00D2 36 37         [10]  180 	ld	(hl), #0x37
   00D4 21 0E 00      [10]  181 	ld	hl, #0x000e
   00D7 19            [11]  182 	add	hl, de
   00D8 36 07         [10]  183 	ld	(hl), #0x07
   00DA 21 0F 00      [10]  184 	ld	hl, #0x000f
   00DD 19            [11]  185 	add	hl, de
   00DE 36 34         [10]  186 	ld	(hl), #0x34
                            187 ;plain.c:25: printf("--- System Start (Baseline) ---\n");
   00E0 D5            [11]  188 	push	de
   00E1 21r18r01      [10]  189 	ld	hl, #___str_5
   00E4 E5            [11]  190 	push	hl
   00E5 CDr00r00      [17]  191 	call	_puts
   00E8 F1            [10]  192 	pop	af
   00E9 D1            [10]  193 	pop	de
                            194 ;plain.c:27: for(int i=0; i<4; i++) {
   00EA 01 00 00      [10]  195 	ld	bc, #0x0000
   00ED                     196 00103$:
   00ED 79            [ 4]  197 	ld	a, c
   00EE D6 04         [ 7]  198 	sub	a, #0x04
   00F0 78            [ 4]  199 	ld	a, b
   00F1 17            [ 4]  200 	rla
   00F2 3F            [ 4]  201 	ccf
   00F3 1F            [ 4]  202 	rra
   00F4 DE 80         [ 7]  203 	sbc	a, #0x80
   00F6 D2r08r01      [10]  204 	jp	NC, 00101$
                            205 ;plain.c:28: process_block(data);
   00F9 6B            [ 4]  206 	ld	l, e
   00FA 62            [ 4]  207 	ld	h, d
   00FB C5            [11]  208 	push	bc
   00FC D5            [11]  209 	push	de
   00FD E5            [11]  210 	push	hl
   00FE CDr00r00      [17]  211 	call	_process_block
   0101 F1            [10]  212 	pop	af
   0102 D1            [10]  213 	pop	de
   0103 C1            [10]  214 	pop	bc
                            215 ;plain.c:27: for(int i=0; i<4; i++) {
   0104 03            [ 6]  216 	inc	bc
   0105 C3rEDr00      [10]  217 	jp	00103$
   0108                     218 00101$:
                            219 ;plain.c:31: printf("--- System Shutdown ---\n");
   0108 21r38r01      [10]  220 	ld	hl, #___str_7
   010B E5            [11]  221 	push	hl
   010C CDr00r00      [17]  222 	call	_puts
   010F F1            [10]  223 	pop	af
                            224 ;plain.c:32: return 0;
   0110 21 00 00      [10]  225 	ld	hl, #0x0000
   0113                     226 00105$:
                            227 ;plain.c:33: }
   0113 DD F9         [10]  228 	ld	sp, ix
   0115 DD E1         [14]  229 	pop	ix
   0117 C9            [10]  230 	ret
   0118                     231 ___str_5:
   0118 2D 2D 2D 20 53 79   232 	.ascii "--- System Start (Baseline) ---"
        73 74 65 6D 20 53
        74 61 72 74 20 28
        42 61 73 65 6C 69
        6E 65 29 20 2D 2D
        2D
   0137 00                  233 	.db 0x00
   0138                     234 ___str_7:
   0138 2D 2D 2D 20 53 79   235 	.ascii "--- System Shutdown ---"
        73 74 65 6D 20 53
        68 75 74 64 6F 77
        6E 20 2D 2D 2D
   014F 00                  236 	.db 0x00
                            237 	.area _CODE
                            238 	.area _INITIALIZER
                            239 	.area _CABS (ABS)

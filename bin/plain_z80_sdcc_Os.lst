                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 4.0.0 #11528 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module plain
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _process_block
                             13 	.globl _puts
                             14 	.globl _printf
                             15 	.globl _state
                             16 ;--------------------------------------------------------
                             17 ; special function registers
                             18 ;--------------------------------------------------------
                             19 ;--------------------------------------------------------
                             20 ; ram data
                             21 ;--------------------------------------------------------
                             22 	.area _DATA
   0000                      23 _state::
   0000                      24 	.ds 16
                             25 ;--------------------------------------------------------
                             26 ; ram data
                             27 ;--------------------------------------------------------
                             28 	.area _INITIALIZED
                             29 ;--------------------------------------------------------
                             30 ; absolute external ram data
                             31 ;--------------------------------------------------------
                             32 	.area _DABS (ABS)
                             33 ;--------------------------------------------------------
                             34 ; global & static initialisations
                             35 ;--------------------------------------------------------
                             36 	.area _HOME
                             37 	.area _GSINIT
                             38 	.area _GSFINAL
                             39 	.area _GSINIT
                             40 ;--------------------------------------------------------
                             41 ; Home
                             42 ;--------------------------------------------------------
                             43 	.area _HOME
                             44 	.area _HOME
                             45 ;--------------------------------------------------------
                             46 ; code
                             47 ;--------------------------------------------------------
                             48 	.area _CODE
                             49 ;plain.c:8: void process_block(uint8_t* input) {
                             50 ;	---------------------------------
                             51 ; Function process_block
                             52 ; ---------------------------------
   0000                      53 _process_block::
   0000 CDr00r00      [17]   54 	call	___sdcc_enter_ix
                             55 ;plain.c:9: printf("[LOG] Processing block: ");
   0003 21r45r00      [10]   56 	ld	hl, #___str_0
   0006 E5            [11]   57 	push	hl
   0007 CDr00r00      [17]   58 	call	_printf
   000A F1            [10]   59 	pop	af
                             60 ;plain.c:10: for(int i=0; i<16; i++) {
   000B 01 00 00      [10]   61 	ld	bc, #0x0000
   000E                      62 00103$:
   000E 79            [ 4]   63 	ld	a, c
   000F D6 10         [ 7]   64 	sub	a, #0x10
   0011 78            [ 4]   65 	ld	a, b
   0012 17            [ 4]   66 	rla
   0013 3F            [ 4]   67 	ccf
   0014 1F            [ 4]   68 	rra
   0015 DE 80         [ 7]   69 	sbc	a, #0x80
   0017 30 21         [12]   70 	jr	NC,00101$
                             71 ;plain.c:12: state[i] = input[i] ^ 0xFF; 
   0019 21r00r00      [10]   72 	ld	hl, #_state
   001C 09            [11]   73 	add	hl, bc
   001D EB            [ 4]   74 	ex	de, hl
   001E DD 6E 04      [19]   75 	ld	l, 4 (ix)
   0021 DD 66 05      [19]   76 	ld	h, 5 (ix)
   0024 09            [11]   77 	add	hl, bc
   0025 7E            [ 7]   78 	ld	a, (hl)
   0026 2F            [ 4]   79 	cpl
   0027 12            [ 7]   80 	ld	(de), a
                             81 ;plain.c:13: printf("%02x ", state[i]);
   0028 5F            [ 4]   82 	ld	e, a
   0029 16 00         [ 7]   83 	ld	d, #0x00
   002B C5            [11]   84 	push	bc
   002C D5            [11]   85 	push	de
   002D 21r5Er00      [10]   86 	ld	hl, #___str_1
   0030 E5            [11]   87 	push	hl
   0031 CDr00r00      [17]   88 	call	_printf
   0034 F1            [10]   89 	pop	af
   0035 F1            [10]   90 	pop	af
   0036 C1            [10]   91 	pop	bc
                             92 ;plain.c:10: for(int i=0; i<16; i++) {
   0037 03            [ 6]   93 	inc	bc
   0038 18 D4         [12]   94 	jr	00103$
   003A                      95 00101$:
                             96 ;plain.c:15: printf("\n");
   003A 21r64r00      [10]   97 	ld	hl, #___str_3
   003D E5            [11]   98 	push	hl
   003E CDr00r00      [17]   99 	call	_puts
   0041 F1            [10]  100 	pop	af
                            101 ;plain.c:16: }
   0042 DD E1         [14]  102 	pop	ix
   0044 C9            [10]  103 	ret
   0045                     104 ___str_0:
   0045 5B 4C 4F 47 5D 20   105 	.ascii "[LOG] Processing block: "
        50 72 6F 63 65 73
        73 69 6E 67 20 62
        6C 6F 63 6B 3A 20
   005D 00                  106 	.db 0x00
   005E                     107 ___str_1:
   005E 25 30 32 78 20      108 	.ascii "%02x "
   0063 00                  109 	.db 0x00
   0064                     110 ___str_3:
   0064 00                  111 	.db 0x00
                            112 ;plain.c:18: int main() {
                            113 ;	---------------------------------
                            114 ; Function main
                            115 ; ---------------------------------
   0065                     116 _main::
   0065 CDr00r00      [17]  117 	call	___sdcc_enter_ix
   0068 21 F0 FF      [10]  118 	ld	hl, #-16
   006B 39            [11]  119 	add	hl, sp
   006C F9            [ 6]  120 	ld	sp, hl
                            121 ;plain.c:20: uint8_t data[16] = {
   006D 21 00 00      [10]  122 	ld	hl, #0
   0070 39            [11]  123 	add	hl, sp
   0071 EB            [ 4]  124 	ex	de, hl
   0072 3E 32         [ 7]  125 	ld	a, #0x32
   0074 12            [ 7]  126 	ld	(de), a
   0075 6B            [ 4]  127 	ld	l, e
   0076 62            [ 4]  128 	ld	h, d
   0077 23            [ 6]  129 	inc	hl
   0078 36 43         [10]  130 	ld	(hl), #0x43
   007A 6B            [ 4]  131 	ld	l, e
   007B 62            [ 4]  132 	ld	h, d
   007C 23            [ 6]  133 	inc	hl
   007D 23            [ 6]  134 	inc	hl
   007E 36 F6         [10]  135 	ld	(hl), #0xf6
   0080 6B            [ 4]  136 	ld	l, e
   0081 62            [ 4]  137 	ld	h, d
   0082 23            [ 6]  138 	inc	hl
   0083 23            [ 6]  139 	inc	hl
   0084 23            [ 6]  140 	inc	hl
   0085 36 A8         [10]  141 	ld	(hl), #0xa8
   0087 21 04 00      [10]  142 	ld	hl, #0x0004
   008A 19            [11]  143 	add	hl, de
   008B 36 88         [10]  144 	ld	(hl), #0x88
   008D 21 05 00      [10]  145 	ld	hl, #0x0005
   0090 19            [11]  146 	add	hl, de
   0091 36 5A         [10]  147 	ld	(hl), #0x5a
   0093 21 06 00      [10]  148 	ld	hl, #0x0006
   0096 19            [11]  149 	add	hl, de
   0097 36 30         [10]  150 	ld	(hl), #0x30
   0099 21 07 00      [10]  151 	ld	hl, #0x0007
   009C 19            [11]  152 	add	hl, de
   009D 36 8D         [10]  153 	ld	(hl), #0x8d
   009F 21 08 00      [10]  154 	ld	hl, #0x0008
   00A2 19            [11]  155 	add	hl, de
   00A3 36 31         [10]  156 	ld	(hl), #0x31
   00A5 21 09 00      [10]  157 	ld	hl, #0x0009
   00A8 19            [11]  158 	add	hl, de
   00A9 36 31         [10]  159 	ld	(hl), #0x31
   00AB 21 0A 00      [10]  160 	ld	hl, #0x000a
   00AE 19            [11]  161 	add	hl, de
   00AF 36 98         [10]  162 	ld	(hl), #0x98
   00B1 21 0B 00      [10]  163 	ld	hl, #0x000b
   00B4 19            [11]  164 	add	hl, de
   00B5 36 A2         [10]  165 	ld	(hl), #0xa2
   00B7 21 0C 00      [10]  166 	ld	hl, #0x000c
   00BA 19            [11]  167 	add	hl, de
   00BB 36 E0         [10]  168 	ld	(hl), #0xe0
   00BD 21 0D 00      [10]  169 	ld	hl, #0x000d
   00C0 19            [11]  170 	add	hl, de
   00C1 36 37         [10]  171 	ld	(hl), #0x37
   00C3 21 0E 00      [10]  172 	ld	hl, #0x000e
   00C6 19            [11]  173 	add	hl, de
   00C7 36 07         [10]  174 	ld	(hl), #0x07
   00C9 21 0F 00      [10]  175 	ld	hl, #0x000f
   00CC 19            [11]  176 	add	hl, de
   00CD 36 34         [10]  177 	ld	(hl), #0x34
                            178 ;plain.c:25: printf("--- System Start (Baseline) ---\n");
   00CF D5            [11]  179 	push	de
   00D0 21r05r01      [10]  180 	ld	hl, #___str_5
   00D3 E5            [11]  181 	push	hl
   00D4 CDr00r00      [17]  182 	call	_puts
   00D7 F1            [10]  183 	pop	af
   00D8 D1            [10]  184 	pop	de
                            185 ;plain.c:27: for(int i=0; i<4; i++) {
   00D9 01 00 00      [10]  186 	ld	bc, #0x0000
   00DC                     187 00103$:
   00DC 79            [ 4]  188 	ld	a, c
   00DD D6 04         [ 7]  189 	sub	a, #0x04
   00DF 78            [ 4]  190 	ld	a, b
   00E0 17            [ 4]  191 	rla
   00E1 3F            [ 4]  192 	ccf
   00E2 1F            [ 4]  193 	rra
   00E3 DE 80         [ 7]  194 	sbc	a, #0x80
   00E5 30 0E         [12]  195 	jr	NC,00101$
                            196 ;plain.c:28: process_block(data);
   00E7 6B            [ 4]  197 	ld	l, e
   00E8 62            [ 4]  198 	ld	h, d
   00E9 C5            [11]  199 	push	bc
   00EA D5            [11]  200 	push	de
   00EB E5            [11]  201 	push	hl
   00EC CDr00r00      [17]  202 	call	_process_block
   00EF F1            [10]  203 	pop	af
   00F0 D1            [10]  204 	pop	de
   00F1 C1            [10]  205 	pop	bc
                            206 ;plain.c:27: for(int i=0; i<4; i++) {
   00F2 03            [ 6]  207 	inc	bc
   00F3 18 E7         [12]  208 	jr	00103$
   00F5                     209 00101$:
                            210 ;plain.c:31: printf("--- System Shutdown ---\n");
   00F5 21r25r01      [10]  211 	ld	hl, #___str_7
   00F8 E5            [11]  212 	push	hl
   00F9 CDr00r00      [17]  213 	call	_puts
   00FC F1            [10]  214 	pop	af
                            215 ;plain.c:32: return 0;
   00FD 21 00 00      [10]  216 	ld	hl, #0x0000
                            217 ;plain.c:33: }
   0100 DD F9         [10]  218 	ld	sp, ix
   0102 DD E1         [14]  219 	pop	ix
   0104 C9            [10]  220 	ret
   0105                     221 ___str_5:
   0105 2D 2D 2D 20 53 79   222 	.ascii "--- System Start (Baseline) ---"
        73 74 65 6D 20 53
        74 61 72 74 20 28
        42 61 73 65 6C 69
        6E 65 29 20 2D 2D
        2D
   0124 00                  223 	.db 0x00
   0125                     224 ___str_7:
   0125 2D 2D 2D 20 53 79   225 	.ascii "--- System Shutdown ---"
        73 74 65 6D 20 53
        68 75 74 64 6F 77
        6E 20 2D 2D 2D
   013C 00                  226 	.db 0x00
                            227 	.area _CODE
                            228 	.area _INITIALIZER
                            229 	.area _CABS (ABS)
